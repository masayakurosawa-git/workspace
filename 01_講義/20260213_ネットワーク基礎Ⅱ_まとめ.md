# ネットワーク基礎まとめ

---

## ネットワーク機器の基本

### ルータ（Router）
- **役割**：異なるネットワーク同士をつなぐ機器（ネットワークの「中継所」）
- **何ができる？**：IPアドレスを見て「次にどこへ送るか」を決める（ルーティング）
- **例**：自宅のWi‑Fiルータ（家庭内LAN ↔ インターネットをつなぐ）

---

### スイッチ（Switch）
- **役割**：同じネットワーク（同一LAN）内の機器同士をつなぐ機器
- **ポイント**：MACアドレスを覚えて、必要な相手にだけ転送するので効率が良い

---

### ハブ（Hub）
- **役割**：スイッチに似ているが、仕組みが単純（古い機器）
- **ポイント**：受け取ったデータを**全ポートにばらまく**ため、無駄な通信が増えやすい

---
</br>

## 基本用語

### プロトコル
- **通信のルール**  
  例：「こういう順番で話そう」「この形式で送ろう」という決まり。
- 人間で言う「共通言語」に近い（HTTP、TCP、IP など）

---

### OSI参照モデル
- **通信を7つの階層（レイヤ）に分けて整理した考え方**
- **メリット**
  - 仕組みの理解がしやすい
  - 障害時に「どの層が怪しいか」で切り分けしやすい
  - 設計が体系立てて考えられる

覚え方：「**アプセトネデブ**」  
（アプリ、プレゼン、セッション、トランスポート、ネットワーク、データリンク、物理）

---
</br>
</br>
</br>


# OSI参照モデル（7階層）

| 層 | 名称 | 役割（初心者向け） | 主な例 |
|----|------|------------------|--------|
| 7 | アプリケーション層 | ユーザーが使うサービスの入口 | HTTP, FTP, SMTP, DNS, SSH |
| 6 | プレゼンテーション層 | データの形式変換・暗号化など | JSON, XML, UTF-8, TLS |
| 5 | セッション層 | 会話（セッション）の開始/維持/終了 | セッション管理 |
| 4 | トランスポート層 | 送受信の信頼性・順序・ポート管理 | TCP, UDP |
| 3 | ネットワーク層 | IPで「どのネットワークへ」届ける | IPv4/IPv6, ルーティング |
| 2 | データリンク層 | 同一LAN内でMACを使って届ける | Ethernet, ARP |
| 1 | 物理層 | ケーブル・電気/光の信号 | LANケーブル, 光ファイバー |

---
</br>

## レイヤー1：物理層
- **見るところ**：ケーブルが刺さっているか、断線・接触不良がないか、ポートが死んでないか
- **典型トラブル**：リンクランプが点かない、速度が落ちる、そもそも通信できない

### 代表的な規格（例）
- IEEE 802.3（有線LANの規格：Ethernet系）
- Bluetooth（近距離無線）
- USB（機器接続）

### ケーブル種類（例）
- ツイストペアケーブル（LANケーブル）
- 光ファイバーケーブル（長距離・高速向き）

---

## トポロジー（接続形態）
ネットワークの「つなぎ方の形」

- **スター型**：中央のスイッチに各機器がつながる（一般的）
- **ツリー型**：階層構造（スター型の拡張）
- **バス型**：一本の線にぶら下がる（今は少なめ）
- **リング型**：輪っかで接続（特殊）
- **メッシュ型**：網状で冗長化  
  - **フルメッシュ**：全機器が全機器と接続（高コスト）  
  - **部分メッシュ**：必要なところだけ接続（現実的）

---
</br>

## レイヤー2：データリンク層
- **ポイント**：MACアドレスを使って同一LAN内で正しく届ける層
- スイッチが活躍する領域

### 代表的なプロトコル（例）
- Ethernet
- PPP
- Token Ring
- Frame Relay

### ARP（重要）
- **IPアドレス → MACアドレスを調べる仕組み**
- 同一LAN内で「このIPって誰？」を解決してから通信する

---

## パケット通信とは
- データを小さな単位（パケット）に分割して送る方式
- 受信側で順番を整えて元に戻す（必要に応じて再送など）

※暗号化の話（AES/RSA/DH など）は主に上位層（TLS等）で使われることが多い、と覚えると整理しやすいです。

---
</br>

## レイヤー3：ネットワーク層
- **異なるネットワーク同士を中継する層**
- **IPアドレス**を使って宛先ネットワークへ届ける（ルータの領域）

### ルーティング
- データを送る「経路」を決めること
- **静的ルーティング**：手で経路を設定（シンプル・小規模向け）
- **動的ルーティング**：ルータ同士が情報交換して経路を自動学習（大規模向け）

---
</br>

## レイヤー4：トランスポート層
- **端末間（end-to-end）の通信を成立させる層**
- **ポート番号**で「どのアプリに渡すか」を決める（例：HTTP=80/443）

### TCP と UDP
- **TCP**：確実に届ける（順序保証、再送、輻輳制御）→ Web/メールなど
- **UDP**：速さ重視（保証は弱い）→ 音声/動画/ゲームなど

### TCPの接続（3-way handshake）
1. SYN（接続したい）
2. SYN/ACK（いいよ）
3. ACK（開始）

### TCPの切断（代表例）
- FIN → FIN/ACK → ACK（切断の握手）

---
</br>

## レイヤー5：セッション層
- アプリ同士の「会話（セッション）」を管理する層
- 例：ログイン状態の維持、接続の開始/終了の管理（概念として理解でOK）

---
</br>

## レイヤー6：プレゼンテーション層
- データを**相手が理解できる形式**に整える層
- 例：文字コード、圧縮、暗号化、データ形式変換

### 代表的なデータ形式（例）
| 形式 | 概要 |
|------|------|
| XML | タグ形式のデータ |
| JSON | 軽量で扱いやすいデータ形式 |
| CSV | カンマ区切りのテキスト |
| YAML | 設定ファイルでよく使われる |

---
</br>

## レイヤー7：アプリケーション層
- ユーザーが直接利用するサービスの層（Web、メール、名前解決、リモート接続など）

### 代表的なプロトコル
| プロトコル | 説明 |
|-----------|------|
| HTTP | Web通信 |
| FTP | ファイル転送 |
| SMTP | メール送信 |
| POP3 | メール受信（取得） |
| IMAP | メール受信（サーバ上で管理） |
| DNS | 名前解決（example.com → IP） |
| Telnet | 古いリモート接続（暗号化なし） |
| SSH | 安全なリモート接続（暗号化あり） |
| SNMP | ネットワーク機器の監視 |
| LDAP | ディレクトリサービス（ユーザ情報管理など） |

---
</br>
</br>
</br>


# カプセル化（Encapsulation）
- データが送られるとき、各層で**ヘッダ（制御情報）**が付いていくこと
- イメージ：
  - 手紙（データ）を封筒に入れる → さらに箱に入れる → 配送伝票を貼る、のように層ごとに情報が追加される

---
</br>
</br>
</br>


# ネットワークを構成する要素（ざっくり）
1. **NIC**：PCのネットワーク接続口（LANカード）
2. **ルータ**：異なるネットワーク接続
3. **スイッチ**：LAN内の接続（MACで転送）
4. **ブリッジ**：ネットワークの分割/接続（L2）
5. **ハブ**：全転送（非効率）
6. **モデム**：回線種別の変換
7. **ファイアウォール**：通信の通過/遮断（門番）
8. **VPNゲートウェイ**：暗号化トンネルで安全に社内へ接続
9. **ロードバランサ**：アクセスを複数サーバに分散

---
</br>
</br>
</br>


# 通信制御（トラフィックを安定させる考え方）

## フロー制御
- 受信側の処理能力を超えないように送信量を調整する仕組み

## 輻輳（ふくそう）制御
- ネットワークが混雑（渋滞）したときに、送信量を調整して崩壊を防ぐ仕組み

## QoS（Quality of Service）
- 「重要な通信を優先する」仕組み
- 例：オンライン会議を優先、バックアップ通信は後回し など

## オートネゴシエーション
- 機器同士が、速度（例：1Gbps/100Mbps）や全二重/半二重などを**自動で交渉して決める**仕組み

## トラフィック制御
- トラフィック（通信量）を監視し、必要に応じて調整すること
  - バンド幅制御
  - パケット選別
  - スケジューリング

## STP（Spanning Tree Protocol）
- スイッチを冗長に組むと**ループ**が起きやすい
- STPはループを防ぐために、**一部の経路を自動で無効化**して安全な経路だけを残す仕組み

---
</br>
</br>
</br>


# まとめ（覚える軸）
- **L1**：物理（刺さってる？）
- **L2**：同一LAN（MAC/スイッチ/ARP）
- **L3**：別ネットワーク（IP/ルータ/ルーティング）
- **L4**：品質（TCP/UDP/ポート）
- **L7**：使うサービス（HTTP/DNS/SSH/メール）
- **QoS**：優先席、**STP**：ループ防止
