## 🎯 目的
```
PublicでApacheをインストール
↓
その状態をAMI化
↓
Private Subnetで起動
```
---
</br>


## 🏗 全体構成イメージ
```
① Public Subnet
   EC2（Apacheインストール済）
        ↓
   AMI作成
        ↓
② Private Subnet
   AMIから新規EC2起動
```
---
</br>


## 🪜 手順（実務レベル）
**① Public SubnetでEC2作成**
- Public IPあり
- IGW接続あり
- SSH可能

**② Apacheインストール**</br>
Amazon Linux 2023 の場合：
```bash
sudo dnf update -y
sudo dnf install httpd -y
sudo systemctl enable httpd
sudo systemctl start httpd
```

動作確認：
```bash
http://<PublicIP>
```

**③ AMIを作成**</br>
AWSコンソール：
```bash
EC2
↓
対象インスタンス選択
↓
アクション
↓
イメージとテンプレート
↓
イメージを作成
```
ポイント：
- 「再起動」推奨（整合性のため）
- 数分待つ

**④ Private SubnetでEC2起動**
```
EC2起動
↓
AMI選択（自分が作成したもの）
↓
サブネット：Privateを指定
↓
Public IP：無効
```

### 💡 重要ポイント（プロ視点）
**セキュリティグループ**</br>
**Private側では：**
- SSHは踏み台からのみ許可
- 80番はALBやAPからのみ許可

**ApacheのListen確認**

念のため：
```bash
sudo vi /etc/httpd/conf/httpd.conf
```
```bash
Listen 80
```
→ OK