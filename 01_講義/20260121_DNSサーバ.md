# DNS概要
IPアドレスをドメイン名に変換する = 名前解決


## ドメイン
URLの「www.rakus-partners.co.jp」のような文字列のこと。

- トップレベルドメイン(TDL) :  
「org」「com」「jp」のような一番右の文字列のことを指す。  
商用利用されるようなサイトを構築する際に使用される。

## レジストラ
ドメイン登録業社を指す。  
ドメインは購入するもの。  

## レジストリ
ドメイン情報を持つデータベースを管理している機関。


## サブドメイン
トップレベルドメイン以外の独自ドメインのこと。  
「www.rakus-partners.co」のこと。

何をドメインとして見るかによって、どこがサブドメインかが変わってくる。


.jp 
co.jp

↓ 権限移譲

rakus-partners.co.jp



## FQDN
完全に指定されたドメイン名。

ex) 「www.rakus-partners.co.jp」  
第1レベルドメイン: jp  
第2レベルドメイン: co  
第3レベルドメイン: rakus-partners  
第4レベルドメイン: www  



# DNSサーバ
## 権威DNSサーバ
IPアドレスとドメインが対応する管理表を保持している。  
問い合わせに対し、対応する情報を返す。


## DNSキャッシュサーバ
管理表を持っていないサーバ。  
ex) 「www.rakus-partners.co.jp」  

.jp  
192.168.0.1 = co.jp  
  ↓  
co.jp  
192.168.0.2 = rakus-partners.co.jp  
  ↓  
rakus-partners.co.jp  
192.168.0.3 = www.rakus-partners.co.jp


上記の検索結果を一定期間、保存することが可能 = キャッシュ
キャッシュ保存することで、通信の高速化が可能。



## ゾーン情報
ゾーン情報 = テーブル
1件の情報 = レコード


## ゾーン転送
ゾーン情報をコピーして転送する。
権威DNSサーバがダウンしても、他のDNSサーバでサービスを継続できる。

転送元のサーバ: プライマリサーバ
転送先のサーバ: セカンダリサーバ







## BINDについて
名前解決などのクエリやり取りを(UDP:53)を使用する。
セキュリティグループのインバウンドルールは以下を指定。
ドメインに対応するIPを特定することは困難なため、0.0.0.0/0を指定。

タイプ: DNS(UDP)
プロトコル: UDP
ポート範囲: 53
ソース: 0.0.0.0/0



TCPのスリーウェイハンドシェイク



ゾーン転送を行うためには、TCP:53を使用する。
正確にコピーを行うため、正確性が重要になる。


タイプ: TCP
プロトコル: TCP
ポート範囲: 53
ソース: 自分のプライベートIP










# 専門用語
「可用性」  
サービスが必要な時に利用できる状態を維持する能力を指す。  

「冗長化」  
予備を作成することで、障害発生時にサービスを継続できるようにする。  

冗長化によって、可用性を高める。  
↓  
サービスが止まりにくい。  
↓  
サービスの信頼性が高まる。  


「脆弱性」
システムの欠陥。ハッカーなどに悪用されると情報流出などの危険性がある。

「DOS攻撃」
サーバやサービスに大量の負荷をかけて、正常に使えなくする攻撃



## ゾーンファイル
ファイル名は自由

ゾーン名：
hogehoge.com

ファイルパス：
/var/named/hogehoge.com.zone


正引き：ドメイン名からIPアドレスに変換
逆引き：IPアドレスからドメイン名

- 設定方法
zone "hogehoge.com" IN {
    type master;
    file "/var/named/hogehoge.com.zone";
};

