# ネットワーク用語
TCP
プロトコル
IP
Ethernet


# プロトコル
データをやり取りするためのルール。
通信する上でのお約束事。

プロトコル
 ┗ ssh
 ┗ http
 ┗ https(通信を暗号化)


# LAN / WAN
LAN：限定した通信域
WAN：離れたLAN同士を電話回線や専用線を使用して接続したネットワーク


# サーバネットワーク
- リクエスト：
コンピュータがサーバに対して要求すること。

- レスポンス：
要求されたページをクライアントに返すこと。

- クライアント：サービスを受ける側
DBサーバのクライアント → WEBサーバ
WEBサーバのクライアント → フロント（入力）


# TCP/IP
ミドルウェアでは、さまざまなプロトコルが出てくる。
ミドルウェアを構築する際に、セキュリティグループに穴を開ける。
そのときにミドルウェア専用のプロトコルを使用するため、よく調べること。


# TCP/IP 階層モデル
- アプリケーション層
webサイト閲覧、メールやり取り、ファイル送信など。
===============================
1. HTTP
Webページを表示するための通信

2. DNS
ドメイン名をIPアドレスに変換する

3. SSH
安全にサーバへログイン・操作する

4. SNMP
ネットワーク機器を監視・管理する

5. POP
メールを受信（サーバから取り出す）

6. IMAP
メールをサーバ上で管理・閲覧する
===============================


- トランスポート層
アプリケーション層で作成されたデータが送られる場所。
サーバ・クライアント間でデータ通信路を確立するためにポート番号を使用する。
webサイト閲覧 → 80
メール送信 → 25
===============================
1. TCP
信頼性の高い通信。データが相手に届いているかを確認する。届かない場合、データを再送する。データ再送するため、処理が遅い。
(ex)
メール、オンライン決済、サイト閲覧

2. UDP：
信頼性の低い通信。データが相手に届いているかを確認しない。データ再送がないため、処理が高速。
(ex)
電話、動画視聴
===============================


- インターネット層
データを目的のコンピュータまで届けるルーティングを行う。
===============================
1. IP
ネットワーク上の住所。
===============================


- ネットワークインタフェース層
上位層から受け取ったデータをLANケーブルに流すための処理を行う。
パケット（データ）を電気信号に変換する。
===============================
1. Ethernet
送り先のコンピュータを特定するためにMACアドレスをデータに付加して、それを電気信号に変換する。
===============================



# IPネットワーク
- データ通信の方法
データは一括ではなく、パケットに小分けして段階的に送る。
受け手は、データの並び替えを行う。
TCPでは、足りないパケットのみの再送も可能。


- IPアドレス
第1オクテッド - 第4オクテッドまである。
192.168.10.2

範囲
0.0.0.0 〜 255.255.255.255
※上記、IPv4と呼ばれる。

IPv4：IPアドレスが43億個しかない。
IPv6：IPアドレスが枯渇したため、作られたIPアドレス。

10進数
0.0.0.0 〜 255.255.255.255
2進数
0.0.0.0 〜 11111111.11111111.11111111.11111111


- ネットワークアドレス
IPアドレスが2種類に分けられる。
「ネットワーク部」どのネットワークに属しているか。
「ホスト部」目的のNW機器やサーバ機器。
---------------------------------
|            IPアドレス           |
---------------------------------
|   ネットワーク部   |   ホスト部   |
---------------------------------



- サブネットマスク
ネットワーク部を判別するための記述。

192.168.11.10/24
192.168.11.10/255.255.255.0
↓
255.255.255.0 = 11111111.11111111.11111111.0
(1が24個だから)
↓
[ネットワーク部] → 変わらない
192.168.11.0
[ホスト部(IPアドレスの範囲)] → 変わる(個人のPCを特定するために使われる)
192.168.11.1〜192.168.11.254


テストで計算が出る。
IPアドレスの範囲を求める問題
サイト使用可能

サーバの台数分IPアドレスを割り当てるときにサブネットマスクをどのくらいにするかをせっていすることが必要。


- グローバルIPアドレス
世界に一つだけのIPアドレス。
外部と通信するためのアドレス。

※IPアドレスを管理している企業から、IPアドレスを購入している。

IPアドレスを購入するとIPアドレスが変更されない。
スマホなどプロバイダから借りている場合、一定期間でスマホなどのIPアドレスが変更される。



- プライベートIPアドレス
LAN内部でのみ使用されるIPアドレス。
別LANでIPアドレスが重複している分には問題ない。

※研修中のテストでは、出題される。
クラスA：10.0.0.0 〜 10.255.255.255
クラスB：172.16.0.0 〜 172.31.255.255
クラスC：192.168.0.0 〜 192.168.255.255


- NAT変換
LAN内部からインターネットに出てていくときに、送信元IPをプライベートIP→グローバルIPに変更すること。


- データ単位
===============================
bit ビット      0 または 1	
B   バイト      8 bit	
KB  キロバイト  1,024 B	
MB  メガバイト  1,024 KB	
GB	ギガバイト	1,024 MB	
TB	テラバイト	1,024 GB	
===============================


- ルーティング
道案内のこと。
[ルートテーブル]
「Cにいく時は、サーバBを経由する」というルールを記載しておく。


- ゲートウェイ
所属するネットワークの外部にあるコンピュータと通信を行うときにネットワークの出入り口にルータなどのこと。


- デフォルトゲートウェイ
どこに通信すればいいかわからないときに、通るゲートウェイのこと。



# IPアドレス演習
1. 172.16.0.20/16のネットワークアドレスを求めよ。
172.16.0.0

2. 192.168.1.45/255.255.255.0のネットワークアドレスを求めよ。
192.168.1.0

3. 以下ネットワークアドレスで利用可能なIPアドレスはいくつか。
192.168.10.0/24
→254個

172.16.10.0/25
→126個

10.10.2.0/30
→2個



# グループ演習
チームG


VPC = 家
サブネット = 家の中の部屋


# 注意点
VPCは、チームで一つ。
代表者が作成する。





# 手順
# VPCの作成
=============================================
1. AWSでVPCの管理画面を開く。
2. 「VPCを作成」を押下。
3. 以下を設定する。(他はデフォルト)
    作成するリソース: VPCのみ
    名前タグ: Name:{CL_teamG}を追加
    IPv4 CIDR ブロック: IPv4 CIDRの手動入力 
    IPv4 CIDR: {10.7.0.0/16} 
4. 「VPCを作成」を押下。
=============================================


# サブネットの作成
=============================================
1. ナビゲーションの「サブネット」を押下。
2. 「サブネットを作成」ボタンを押下。
3. 以下を設定。
    VPC ID: {GチームのVPCを選択}
    サブネット名: {CL_teamG_kurosawa}
    アベイラビリティーゾーン: {好きなもの}
    IPv4 VPC CIDR ブロック: {VPCのネットワークアドレスを選択}
    IPv4 サブネット CIDR ブロック: {}
※IPv4 サブネット CIDR ブロックで重複が発生しないように。
{後ほど記述}


4. 「サブネットを作成」を押下。
=============================================


# インターネットゲートウェイの作成
=============================================
1. ナビゲーションの「インターネットゲートウェイ」を押下。
2. 「インターネットゲートウェイの作成」ボタンを押下。
3. 名前を決める。{CL_teamG_IGW}
4. 「インターネットゲートウェイの作成」ボタンを押下。
=============================================


# インターネットゲートウェイをVPCにアタッチする
=============================================
1. 作成したインターネットゲートウェイを選択する。
2. 「アクション」ボタンから「VPCにアタッチ」を選択。
3. 作成したVPCを選択し、「インターネットゲートウェイをアタッチ」
=============================================


# ルーティングの設定
=============================================
1. ナビゲーションの「サブネット」を押下。
2. 作成したサブネットを選択し、「ルートテーブル」タブを押下。
3. 「ルート」→「ルートを編集」を押下。
4. 「ルートを追加」ボタンを押下。

=============================================


# ピアリング接続（VPC同士の接続設定）
=============================================
1. vpc管理画面を開く
2. ナビゲーションの「ピアリング接続」を押下。
3. 「ピアリング接続を作成」を押下。
4. 以下を入力。
名前: 
VPC ID:
ピアリング接続するもう一方の VPC を選択

=============================================





# 質問箱
グローバルIPアドレスについて質問です。
ラクスパートナーズなどの企業は、IPアドレス管理業者からグローバルIPアドレスを購入するとありましたが、
自分たちが使用しているPCやスマホのIPも、グローバルIPに含まれる認識であっていますか？
