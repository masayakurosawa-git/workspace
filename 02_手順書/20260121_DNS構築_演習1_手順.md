# 概要
### 1. DNSサーバを構築し、ドメイン「kurosawa.local」でzoneを作成する。  
### 2. zoneを作成できたら、ペアで名前解決ができるように設定する。
<br/>
<br/>

# 手順
## ①DNSサーバを構築し、以下のドメインでzoneを作成する。
### 0. セキュリティグループにインバウンドルール追加
以下ルールを追加。
```bash
タイプ: DNS(UDP)
プロトコル: UDP
ポート範囲: 53
ソース: 0.0.0.0/0
```
<br/>

### 1. EC2インスタンスに接続
```bash
ssh -i ~/.ssh/CL_kurosawa.pem ec2-user@54.191.25.63
```
<br/>

### 2. ゾーンデータベースファイルの読み込み設定  
ゾーン名: kurosawa.local  
ファイルパス: /var/named/kurosawa.local.zone  

```bash
sudo vi /etc/named.conf

----------------------------------------
# 末尾に追加。
zone "kurosawa.local" IN {
    type master;
    file "/var/named/kurosawa.local.zone";
};
----------------------------------------
```
<br/>

### 3. 設定ファイルの構文チェック
```bash
sudo named-checkconf
```
<br/>

### 4. ゾーンデータベースファイルの作成
```bash
sudo vi /var/named/kurosawa.local.zone

----------------------------------------
$TTL 3600
@ IN SOA ns.kurosawa.local. test.gmail.com. (
20220401 ; serial
3600 ; refresh
3600 ; retry
3600 ; expire
3600 ) ; minimum

        IN NS ns.kurosawa.local.
ns      IN A  172.31.16.240
www     IN A  172.31.16.240
----------------------------------------
```
<br/>

### 5. ゾーンデータベースファイルの構文チェック
```bash
sudo named-checkzone kurosawa.local /var/named/kurosawa.local.zone
```
<br/>

### 6. namedを再起動
```bash
# 再起動
sudo systemctl restart named

# 状態確認
sudo systemctl status named
```
<br/>

### 7. ゾーンの確認
```bash
dig @localhost www.kurosawa.local

#文法
dig {自分} {検索したいドメイン}

# 以下が返ってくることを確認する。
# ANSWER: 1
# 自分のIP
```
<br/>




## ②zoneを作成できたら、ペアで名前解決ができるように設定する。
### 1. ペアのゾーンの確認
大西さんのプライベートIP: 172.31.18.221  
ドメイン名: www.onishi.local

```bash
dig @172.31.18.221 www.onishi.local
```
<br/>