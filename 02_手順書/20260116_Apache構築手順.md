# 演習
## Web-1
=========================================
1. 特権ユーザにスイッチ。
sudo su -

2. ドキュメントルートに /yakiniku を作成。
mkdir /var/www/html/yakiniku

3. ドキュメントルートに /yakiniku/harami.html を作成。
vi /var/www/html/yakiniku/harami.html

4. ブラウザでURLを検索。
http:/44.252.33.32/yakiniku/harami.html
※ IPは自身のグローバルIP
=========================================


## Web-2
=========================================
1. 特権ユーザにスイッチ。
sudo su -

2. httpd.conf のバックアップを作成。
cp -a /etc/httpd/conf/httpd.conf /etc/httpd/conf/httpd.conf.bk
※ cp -a で日付もコピーできる(全く同じものをコピーできる)

3. /home/saba/miso を作成。
mkdir -p /home/saba/miso
※ mkdir -p でディレクトを再帰的に作成。


4. httpd.conf のドキュメントルートを /home/saba に変更。
vi /etc/httpd/conf/httpd.conf
[エディタ内検索]
/
DocumentRoot

[以下に変更]
①
DocumentRoot "/var/www/html"
↓
DocumentRoot "/home/saba"

②
<Directory "/var/www">
↓
<Directory "/home/saba">

③
<Directory "/var/www/html">
↓
<Directory "/home/saba">


5. Apacheの再起動（設定ファイルが反映される）
systemctl restart httpd
systemctl status httpd
※状態確認

6. ドキュメントルートに /miso/hoge.html を作成。
vi /home/saba/miso/hoge.html

7. ブラウザでURLを検索。
http:/44.252.33.32/miso/hoge.html
※ IPは自身のグローバルIP
=========================================


## Web-3
=========================================
1. httpd.conf にリダイレクト設定を追加。
vi /etc/httpd/conf/httpd.conf
[末尾に追加]
Redirect 301 /sa-mon.html http://{BさんのグローバルIP}/aburi-sa-mon.html
※ httpd.conf のバックアップは作成すること。web-2で作成したため今回は割愛。

2. ドキュメントルートに /sa-mon.html を作成。(Aさん作業)
vi /home/saba/sa-mon.html
※ ドキュメントルートは /home/saba であることを前提とする。

3. ドキュメントルートに /aburi-sa-mon.html を作成。(Bさん作業)
vi /home/saba/aburi-sa-mon.html
※ ドキュメントルートは /home/saba であることを前提とする。

4. ブラウザでURLを検索
http:/44.252.33.32/sa-mon.html

5. 以下URLにリダイレクトされていることを確認。
http:/{BさんのグローバルIP}/aburi-sa-mon.html

- 参考
リダイレクトについt
https://tamata78.hatenablog.com/entry/2018/11/20/205222
=========================================


## web-4
=========================================
1. httpd.conf にIP制限の設定を追加。
vi /etc/httpd/conf/httpd.conf
[追加①]
<Directory "/home/saba">
    AllowOverride None
    # Allow open access:
    Require all granted
</Directory>
↓
<Directory "/home/saba">
    AllowOverride None
    # Allow open access:
    # Require all granted
    <RequireAll>
        Require ip 172.31.31.121
        Require not ip 172.31.25.144
    </RequireAll>
</Directory>

[追加②]
# Further relax access to the default document root:
<Directory "/home/saba">
    #
    # Possible values for the Options directive are "None", "All",
    # or any combination of:
    #   Indexes Includes FollowSymLinks SymLinksifOwnerMatch ExecCGI MultiViews
    #
    # Note that "MultiViews" must be named *explicitly* --- "Options All"
    # doesn't give it to you.
    #
    # The Options directive is both complicated and important.  Please see
    # http://httpd.apache.org/docs/2.4/mod/core.html#options
    # for more information.
    #
    Options Indexes FollowSymLinks

    #
    # AllowOverride controls what directives may be placed in .htaccess files.
    # It can be "All", "None", or any combination of the keywords:
    #   AllowOverride FileInfo AuthConfig Limit
    #
    AllowOverride None

    #
    # Controls who can get stuff from this server.
    #
    Require all granted
</Directory>

↓

# Further relax access to the default document root:
<Directory "/home/saba">
    #
    # Possible values for the Options directive are "None", "All",
    # or any combination of:
    #   Indexes Includes FollowSymLinks SymLinksifOwnerMatch ExecCGI MultiViews
    #
    # Note that "MultiViews" must be named *explicitly* --- "Options All"
    # doesn't give it to you.
    #
    # The Options directive is both complicated and important.  Please see
    # http://httpd.apache.org/docs/2.4/mod/core.html#options
    # for more information.
    #
    Options Indexes FollowSymLinks

    #
    # AllowOverride controls what directives may be placed in .htaccess files.
    # It can be "All", "None", or any combination of the keywords:
    #   AllowOverride FileInfo AuthConfig Limit
    #
    AllowOverride None

    #
    # Controls who can get stuff from this server.
    #
    # Require all granted
    <RequireAll>
        Require ip 172.31.31.121
        Require not ip 172.31.25.144
    </RequireAll>
</Directory>


2. 
3. 
4. 
5. 

=========================================